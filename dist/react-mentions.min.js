!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;"undefined"!=typeof window?n=window:"undefined"!=typeof global?n=global:"undefined"!=typeof self&&(n=self),n.ReactMentions=e()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(_dereq_,module,exports){exports.MentionsInput=_dereq_("./lib/MentionsInput"),exports.Mention=_dereq_("./lib/Mention")},{"./lib/Mention":2,"./lib/MentionsInput":3}],2:[function(_dereq_,module){var React="undefined"!=typeof window?window.React:"undefined"!=typeof global?global.React:null,emptyFunction=_dereq_("react/lib/emptyFunction");module.exports=React.createClass({displayName:"Mention",propTypes:{onAdd:React.PropTypes.func},contextTypes:{markup:React.PropTypes.string.isRequired},getDefaultProps:function(){return{trigger:"@",onAdd:emptyFunction,onRemove:emptyFunction}},render:function(){return React.createElement("b",null,this.props.display)},onComponentDidMount:function(){this.props.onAdd&&this.props.onAdd()},onComponentWillUnmount:function(){this.props.onRemove&&this.props.onRemove()}})},{"react/lib/emptyFunction":13}],3:[function(_dereq_,module){var React="undefined"!=typeof window?window.React:"undefined"!=typeof global?global.React:null,LinkedValueUtils=_dereq_("react/lib/LinkedValueUtils"),Mention=(_dereq_("react/lib/emptyFunction"),_dereq_("./Mention")),utils=_dereq_("./utils"),_generateComponentKey=function(usedKeys,id){return usedKeys.hasOwnProperty(id)?usedKeys[id]++:usedKeys[id]=0,id+"_"+usedKeys[id]};module.exports=React.createClass({displayName:"MentionsInput",mixins:[LinkedValueUtils.Mixin],propTypes:{multiLine:React.PropTypes.bool,markup:React.PropTypes.string},childContextTypes:{markup:React.PropTypes.string.isRequired},getDefaultProps:function(){return{multiLine:!0,markup:"@[__display__](__id__)"}},getInitialState:function(){return{selectionStart:null,selectionEnd:null}},getChildContext:function(){return{markup:this.props.markup}},render:function(){return React.createElement("div",null,React.createElement("div",{className:"highlighter"},this.renderHighlighter()),this.renderInput())},renderInput:function(){return React.createElement("textarea",{ref:"input",value:this.getPlainText(),onChange:this.handleChange,onSelect:this.handleSelect})},renderHighlighter:function(){for(var match,substr,value=LinkedValueUtils.getValue(this),resultComponents=[],regex=utils.markupToRegex(this.props.markup),idPos=utils.getPositionOfCapturingGroup(this.props.markup,"id"),displayPos=utils.getPositionOfCapturingGroup(this.props.markup,"display"),typePos=utils.getPositionOfCapturingGroup(this.props.markup,"type"),start=0,componentKeys={};null!==(match=regex.exec(value));){var id=match[idPos+1],display=match[displayPos+1],type=typePos&&match[typePos+1],key=_generateComponentKey(componentKeys,id);match.index>0&&(substr=value.substring(start,match.index),resultComponents.push(substr)),resultComponents.push(this.getMentionComponentForMatch(id,display,type,key)),start=regex.lastIndex}return start<value.length&&(substr=value.substring(start),resultComponents.push(substr)),resultComponents},getMentionComponentForMatch:function(id,display,type,key){var childrenCount=React.Children.count(this.props.children);if(childrenCount>1){if(!type)throw new Error("Since multiple Mention components have been passed as children, the markup has to define the __type__ placeholder");var foundChild=null;return React.Children.forEach(this.props.children,function(child){child.props.type===type&&(foundChild=child)}),React.addons.cloneWithProps(foundChild,{id:id,display:display,key:key})}return 1===childrenCount?React.addons.cloneWithProps(this.props.children,{id:id,display:display,key:key}):Mention({id:id,display:display,key:key})},getPlainText:function(){var value=LinkedValueUtils.getValue(this),regex=utils.markupToRegex(this.props.markup),displayPos=utils.getPositionOfCapturingGroup(this.props.markup,"display");return value.replace(regex,function(){return arguments[displayPos+1]})},handleChange:function(ev){{var value=LinkedValueUtils.getValue(this);ev.target.value,utils.applyChangeToValue(value,this.props.markup,value,this._selectionStart,this._selectionEnd,ev.target.selectionEnd)}},handleSelect:function(ev){this._selectionStart=ev.target.selectionStart,this._selectionEnd=ev.target.selectionEnd},applyChangeToValue:function(ev){newPlainTextValue.console.log(ev);console.log(ev.target.selectionStart,ev.target.selectionEnd)}})},{"./Mention":2,"./utils":4,"react/lib/LinkedValueUtils":5,"react/lib/emptyFunction":13}],4:[function(_dereq_,module){var PLACEHOLDERS={id:"__id__",display:"__display__",type:"__type__"},escapeMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},createEscaper=function(map){var escaper=function(match){return map[match]},keys=[];for(var key in map)map.hasOwnProperty(key)&&keys.push(key);var source="(?:"+keys.join("|")+")",testRegexp=RegExp(source),replaceRegexp=RegExp(source,"g");return function(string){return string=null==string?"":""+string,testRegexp.test(string)?string.replace(replaceRegexp,escaper):string}},numericComparator=function(a,b){return a=null===a?Number.MAX_VALUE:a,b=null===b?Number.MAX_VALUE:b,a-b};module.exports={escapeHtml:createEscaper(escapeMap),escapeRegex:function(str){return str.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},markupToRegex:function(markup,matchAtEnd){var markupPattern=this.escapeRegex(markup);return markupPattern=markupPattern.replace(PLACEHOLDERS.display,"(.+?)"),markupPattern=markupPattern.replace(PLACEHOLDERS.id,"(.+?)"),markupPattern=markupPattern.replace(PLACEHOLDERS.type,"(.+?)"),matchAtEnd&&(markupPattern+="$"),new RegExp(markupPattern,"g")},spliceString:function(str,start,end,insert){return str.substring(0,start)+insert+str.substring(end)},getPositionOfCapturingGroup:function(markup,parameterName){if("id"!==parameterName&&"display"!==parameterName&&"type"!==parameterName)throw new Error("parameterName must be 'id', 'display', or 'type'");var indexDisplay=markup.indexOf(PLACEHOLDERS.display),indexId=markup.indexOf(PLACEHOLDERS.id),indexType=markup.indexOf(PLACEHOLDERS.type);if(0>indexDisplay&&(indexDisplay=null),0>indexId&&(indexId=null),0>indexType&&(indexType=null),null===indexDisplay&&null===indexId)throw new Error("The markup `"+markup+"` must contain at least one of the placeholders `__id__` or `__display__`");if(null===indexType&&"type"===parameterName)return null;var sortedIndices=[indexDisplay,indexId,indexType].sort(numericComparator);return null===indexDisplay&&(indexDisplay=indexId),null===indexId&&(indexId=indexDisplay),"id"===parameterName?sortedIndices.indexOf(indexId):"display"===parameterName?sortedIndices.indexOf(indexDisplay):"type"===parameterName?null===indexType?null:sortedIndices.indexOf(indexType):void 0},mapPlainTextIndex:function(value,markup,indexInPlainText,toEndOfMarkup){for(var match,regex=this.markupToRegex(markup),displayPos=this.getPositionOfCapturingGroup(markup,"display"),start=0,currentPlainTextIndex=0;null!==(match=regex.exec(value));){var display=match[displayPos+1],plainTextIndexDelta=match.index-start;if(currentPlainTextIndex+plainTextIndexDelta>=indexInPlainText)return start+indexInPlainText-currentPlainTextIndex;if(currentPlainTextIndex+plainTextIndexDelta+display.length>=indexInPlainText)return match.index+(toEndOfMarkup?match[0].length:0);currentPlainTextIndex+=plainTextIndexDelta+display.length,start=regex.lastIndex}return start+indexInPlainText-currentPlainTextIndex},applyChangeToValue:function(value,markup,plainTextValue,selectionStartBeforeChange,selectionEndBeforeChange,selectionEndAfterChange){var insert=plainTextValue.slice(selectionStartBeforeChange,selectionEndAfterChange),spliceStart=selectionStartBeforeChange;return spliceStart>0&&selectionStartBeforeChange>selectionEndAfterChange&&spliceStart--,this.spliceString(value,this.mapPlainTextIndex(value,markup,spliceStart,!1),this.mapPlainTextIndex(value,markup,selectionEndBeforeChange,!0),insert)}}},{}],5:[function(_dereq_,module){"use strict";function _assertSingleLink(input){invariant(null==input.props.checkedLink||null==input.props.valueLink)}function _assertValueLink(input){_assertSingleLink(input),invariant(null==input.props.value&&null==input.props.onChange)}function _assertCheckedLink(input){_assertSingleLink(input),invariant(null==input.props.checked&&null==input.props.onChange)}function _handleLinkedValueChange(e){this.props.valueLink.requestChange(e.target.value)}function _handleLinkedCheckChange(e){this.props.checkedLink.requestChange(e.target.checked)}var ReactPropTypes=_dereq_("./ReactPropTypes"),invariant=_dereq_("./invariant"),hasReadOnlyValue={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0},LinkedValueUtils={Mixin:{propTypes:{value:function(props,propName){return!props[propName]||hasReadOnlyValue[props.type]||props.onChange||props.readOnly||props.disabled?void 0:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(props,propName){return!props[propName]||props.onChange||props.readOnly||props.disabled?void 0:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:ReactPropTypes.func}},getValue:function(input){return input.props.valueLink?(_assertValueLink(input),input.props.valueLink.value):input.props.value},getChecked:function(input){return input.props.checkedLink?(_assertCheckedLink(input),input.props.checkedLink.value):input.props.checked},getOnChange:function(input){return input.props.valueLink?(_assertValueLink(input),_handleLinkedValueChange):input.props.checkedLink?(_assertCheckedLink(input),_handleLinkedCheckChange):input.props.onChange}};module.exports=LinkedValueUtils},{"./ReactPropTypes":11,"./invariant":14}],6:[function(_dereq_,module){function assign(target){if(null==target)throw new TypeError("Object.assign target cannot be null or undefined");for(var to=Object(target),hasOwnProperty=Object.prototype.hasOwnProperty,nextIndex=1;nextIndex<arguments.length;nextIndex++){var nextSource=arguments[nextIndex];if(null!=nextSource){var from=Object(nextSource);for(var key in from)hasOwnProperty.call(from,key)&&(to[key]=from[key])}}return to}module.exports=assign},{}],7:[function(_dereq_,module){"use strict";var assign=_dereq_("./Object.assign"),ReactContext={current:{},withContext:function(newContext,scopedCallback){var result,previousContext=ReactContext.current;ReactContext.current=assign({},previousContext,newContext);try{result=scopedCallback()}finally{ReactContext.current=previousContext}return result}};module.exports=ReactContext},{"./Object.assign":6}],8:[function(_dereq_,module){"use strict";var ReactCurrentOwner={current:null};module.exports=ReactCurrentOwner},{}],9:[function(_dereq_,module){"use strict";var ReactContext=_dereq_("./ReactContext"),ReactCurrentOwner=_dereq_("./ReactCurrentOwner"),RESERVED_PROPS=(_dereq_("./warning"),{key:!0,ref:!0}),ReactElement=function(type,key,ref,owner,context,props){this.type=type,this.key=key,this.ref=ref,this._owner=owner,this._context=context,this.props=props};ReactElement.prototype={_isReactElement:!0},ReactElement.createElement=function(type,config,children){var propName,props={},key=null,ref=null;if(null!=config){ref=void 0===config.ref?null:config.ref,key=null==config.key?null:""+config.key;for(propName in config)config.hasOwnProperty(propName)&&!RESERVED_PROPS.hasOwnProperty(propName)&&(props[propName]=config[propName])}var childrenLength=arguments.length-2;if(1===childrenLength)props.children=children;else if(childrenLength>1){for(var childArray=Array(childrenLength),i=0;childrenLength>i;i++)childArray[i]=arguments[i+2];props.children=childArray}if(type.defaultProps){var defaultProps=type.defaultProps;for(propName in defaultProps)"undefined"==typeof props[propName]&&(props[propName]=defaultProps[propName])}return new ReactElement(type,key,ref,ReactCurrentOwner.current,ReactContext.current,props)},ReactElement.createFactory=function(type){var factory=ReactElement.createElement.bind(null,type);return factory.type=type,factory},ReactElement.cloneAndReplaceProps=function(oldElement,newProps){var newElement=new ReactElement(oldElement.type,oldElement.key,oldElement.ref,oldElement._owner,oldElement._context,newProps);return newElement},ReactElement.isValidElement=function(object){var isElement=!(!object||!object._isReactElement);return isElement},module.exports=ReactElement},{"./ReactContext":7,"./ReactCurrentOwner":8,"./warning":15}],10:[function(_dereq_,module){"use strict";var ReactPropTypeLocationNames={};module.exports=ReactPropTypeLocationNames},{}],11:[function(_dereq_,module){"use strict";function createChainableTypeChecker(validate){function checkType(isRequired,props,propName,componentName,location){if(componentName=componentName||ANONYMOUS,null!=props[propName])return validate(props,propName,componentName,location);var locationName=ReactPropTypeLocationNames[location];return isRequired?new Error("Required "+locationName+" `"+propName+"` was not specified in "+("`"+componentName+"`.")):void 0}var chainedCheckType=checkType.bind(null,!1);return chainedCheckType.isRequired=checkType.bind(null,!0),chainedCheckType}function createPrimitiveTypeChecker(expectedType){function validate(props,propName,componentName,location){var propValue=props[propName],propType=getPropType(propValue);if(propType!==expectedType){var locationName=ReactPropTypeLocationNames[location],preciseType=getPreciseType(propValue);return new Error("Invalid "+locationName+" `"+propName+"` of type `"+preciseType+"` "+("supplied to `"+componentName+"`, expected `"+expectedType+"`."))}}return createChainableTypeChecker(validate)}function createAnyTypeChecker(){return createChainableTypeChecker(emptyFunction.thatReturns())}function createArrayOfTypeChecker(typeChecker){function validate(props,propName,componentName,location){var propValue=props[propName];if(!Array.isArray(propValue)){var locationName=ReactPropTypeLocationNames[location],propType=getPropType(propValue);return new Error("Invalid "+locationName+" `"+propName+"` of type "+("`"+propType+"` supplied to `"+componentName+"`, expected an array."))}for(var i=0;i<propValue.length;i++){var error=typeChecker(propValue,i,componentName,location);if(error instanceof Error)return error}}return createChainableTypeChecker(validate)}function createElementTypeChecker(){function validate(props,propName,componentName,location){if(!ReactElement.isValidElement(props[propName])){var locationName=ReactPropTypeLocationNames[location];return new Error("Invalid "+locationName+" `"+propName+"` supplied to "+("`"+componentName+"`, expected a ReactElement."))}}return createChainableTypeChecker(validate)}function createInstanceTypeChecker(expectedClass){function validate(props,propName,componentName,location){if(!(props[propName]instanceof expectedClass)){var locationName=ReactPropTypeLocationNames[location],expectedClassName=expectedClass.name||ANONYMOUS;return new Error("Invalid "+locationName+" `"+propName+"` supplied to "+("`"+componentName+"`, expected instance of `"+expectedClassName+"`."))}}return createChainableTypeChecker(validate)}function createEnumTypeChecker(expectedValues){function validate(props,propName,componentName,location){for(var propValue=props[propName],i=0;i<expectedValues.length;i++)if(propValue===expectedValues[i])return;var locationName=ReactPropTypeLocationNames[location],valuesString=JSON.stringify(expectedValues);return new Error("Invalid "+locationName+" `"+propName+"` of value `"+propValue+"` "+("supplied to `"+componentName+"`, expected one of "+valuesString+"."))}return createChainableTypeChecker(validate)}function createObjectOfTypeChecker(typeChecker){function validate(props,propName,componentName,location){var propValue=props[propName],propType=getPropType(propValue);if("object"!==propType){var locationName=ReactPropTypeLocationNames[location];return new Error("Invalid "+locationName+" `"+propName+"` of type "+("`"+propType+"` supplied to `"+componentName+"`, expected an object."))}for(var key in propValue)if(propValue.hasOwnProperty(key)){var error=typeChecker(propValue,key,componentName,location);if(error instanceof Error)return error}}return createChainableTypeChecker(validate)}function createUnionTypeChecker(arrayOfTypeCheckers){function validate(props,propName,componentName,location){for(var i=0;i<arrayOfTypeCheckers.length;i++){var checker=arrayOfTypeCheckers[i];if(null==checker(props,propName,componentName,location))return}var locationName=ReactPropTypeLocationNames[location];return new Error("Invalid "+locationName+" `"+propName+"` supplied to "+("`"+componentName+"`."))}return createChainableTypeChecker(validate)}function createNodeChecker(){function validate(props,propName,componentName,location){if(!isNode(props[propName])){var locationName=ReactPropTypeLocationNames[location];return new Error("Invalid "+locationName+" `"+propName+"` supplied to "+("`"+componentName+"`, expected a ReactNode."))}}return createChainableTypeChecker(validate)}function createShapeTypeChecker(shapeTypes){function validate(props,propName,componentName,location){var propValue=props[propName],propType=getPropType(propValue);if("object"!==propType){var locationName=ReactPropTypeLocationNames[location];return new Error("Invalid "+locationName+" `"+propName+"` of type `"+propType+"` "+("supplied to `"+componentName+"`, expected `object`."))}for(var key in shapeTypes){var checker=shapeTypes[key];if(checker){var error=checker(propValue,key,componentName,location);if(error)return error}}}return createChainableTypeChecker(validate,"expected `object`")}function isNode(propValue){switch(typeof propValue){case"number":case"string":return!0;case"boolean":return!propValue;case"object":if(Array.isArray(propValue))return propValue.every(isNode);if(ReactElement.isValidElement(propValue))return!0;for(var k in propValue)if(!isNode(propValue[k]))return!1;return!0;default:return!1}}function getPropType(propValue){var propType=typeof propValue;return Array.isArray(propValue)?"array":propValue instanceof RegExp?"object":propType}function getPreciseType(propValue){var propType=getPropType(propValue);if("object"===propType){if(propValue instanceof Date)return"date";if(propValue instanceof RegExp)return"regexp"}return propType}var ReactElement=_dereq_("./ReactElement"),ReactPropTypeLocationNames=_dereq_("./ReactPropTypeLocationNames"),deprecated=_dereq_("./deprecated"),emptyFunction=_dereq_("./emptyFunction"),ANONYMOUS="<<anonymous>>",elementTypeChecker=createElementTypeChecker(),nodeTypeChecker=createNodeChecker(),ReactPropTypes={array:createPrimitiveTypeChecker("array"),bool:createPrimitiveTypeChecker("boolean"),func:createPrimitiveTypeChecker("function"),number:createPrimitiveTypeChecker("number"),object:createPrimitiveTypeChecker("object"),string:createPrimitiveTypeChecker("string"),any:createAnyTypeChecker(),arrayOf:createArrayOfTypeChecker,element:elementTypeChecker,instanceOf:createInstanceTypeChecker,node:nodeTypeChecker,objectOf:createObjectOfTypeChecker,oneOf:createEnumTypeChecker,oneOfType:createUnionTypeChecker,shape:createShapeTypeChecker,component:deprecated("React.PropTypes","component","element",this,elementTypeChecker),renderable:deprecated("React.PropTypes","renderable","node",this,nodeTypeChecker)};module.exports=ReactPropTypes},{"./ReactElement":9,"./ReactPropTypeLocationNames":10,"./deprecated":12,"./emptyFunction":13}],12:[function(_dereq_,module){function deprecated(namespace,oldName,newName,ctx,fn){return fn}_dereq_("./Object.assign"),_dereq_("./warning");module.exports=deprecated},{"./Object.assign":6,"./warning":15}],13:[function(_dereq_,module){function makeEmptyFunction(arg){return function(){return arg}}function emptyFunction(){}emptyFunction.thatReturns=makeEmptyFunction,emptyFunction.thatReturnsFalse=makeEmptyFunction(!1),emptyFunction.thatReturnsTrue=makeEmptyFunction(!0),emptyFunction.thatReturnsNull=makeEmptyFunction(null),emptyFunction.thatReturnsThis=function(){return this},emptyFunction.thatReturnsArgument=function(arg){return arg},module.exports=emptyFunction},{}],14:[function(_dereq_,module){"use strict";var invariant=function(condition,format,a,b,c,d,e,f){if(!condition){var error;if(void 0===format)error=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var args=[a,b,c,d,e,f],argIndex=0;error=new Error("Invariant Violation: "+format.replace(/%s/g,function(){return args[argIndex++]}))}throw error.framesToPop=1,error}};module.exports=invariant},{}],15:[function(_dereq_,module){"use strict";var emptyFunction=_dereq_("./emptyFunction"),warning=emptyFunction;module.exports=warning},{"./emptyFunction":13}]},{},[1])(1)});