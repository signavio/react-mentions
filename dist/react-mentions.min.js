!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;"undefined"!=typeof window?n=window:"undefined"!=typeof global?n=global:"undefined"!=typeof self&&(n=self),n.ReactMentions=e()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(_dereq_,module){"use strict";{var React="undefined"!=typeof window?window.React:"undefined"!=typeof global?global.React:null,emptyFunction=_dereq_("fbjs/lib/emptyFunction");_dereq_("./utils")}module.exports=React.createClass({displayName:"Mention",propTypes:{onAdd:React.PropTypes.func,renderSuggestion:React.PropTypes.func,className:React.PropTypes.string,style:React.PropTypes.object},getDefaultProps:function(){return{trigger:"@",onAdd:emptyFunction,onRemove:emptyFunction,renderSuggestion:null,isLoading:!1}},render:function(){return React.createElement("strong",{style:this.props.style,className:this.props.className},this.props.display)}})},{"./utils":5,"fbjs/lib/emptyFunction":6}],2:[function(_dereq_,module){"use strict";function _objectWithoutProperties(obj,keys){var target={};for(var i in obj)keys.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(obj,i)&&(target[i]=obj[i]);return target}var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},React="undefined"!=typeof window?window.React:"undefined"!=typeof global?global.React:null,LinkedValueUtils=_dereq_("react/lib/LinkedValueUtils"),emptyFunction=_dereq_("fbjs/lib/emptyFunction"),utils=_dereq_("./utils"),Mention=_dereq_("./Mention"),SuggestionsOverlay=_dereq_("./SuggestionsOverlay"),_generateComponentKey=function(usedKeys,id){return usedKeys.hasOwnProperty(id)?usedKeys[id]++:usedKeys[id]=0,id+"_"+usedKeys[id]},_getTriggerRegex=function(trigger){if(trigger instanceof RegExp)return trigger;var escapedTriggerChar=utils.escapeRegex(trigger);return new RegExp("(?:^|\\s)("+escapedTriggerChar+"([^\\s"+escapedTriggerChar+"]*))$")},_getDataProvider=function(data){return data instanceof Array?function(query){for(var results=[],i=0,l=data.length;l>i;++i){var display=data[i].display||data[i].id;display.toLowerCase().indexOf(query.toLowerCase())>=0&&results.push(data[i])}return results}:data},KEY={TAB:9,RETURN:13,ESC:27,UP:38,DOWN:40};module.exports=React.createClass({displayName:"MentionsInput",mixins:[LinkedValueUtils.Mixin],propTypes:{singleLine:React.PropTypes.bool,markup:React.PropTypes.string,displayTransform:React.PropTypes.func},getDefaultProps:function(){return{markup:"@[__display__](__id__)",singleLine:!1,className:"react-mentions",displayTransform:function(id,display){return display},onKeyDown:emptyFunction,onSelect:emptyFunction,onBlur:emptyFunction}},getInitialState:function(){return{selectionStart:null,selectionEnd:null,suggestions:{}}},render:function(){var _props=this.props,singleLine=_props.singleLine,className=_props.className,inputProps=(_props.markup,_props.displayTransform,_props.onKeyDown,_props.onSelect,_props.onBlur,_props.onChange,_props.children,_props.value,_props.valueLink,_objectWithoutProperties(_props,["singleLine","className","markup","displayTransform","onKeyDown","onSelect","onBlur","onChange","children","value","valueLink"]));return React.createElement("div",{ref:"container",className:className,style:{position:"relative",overflowY:"visible"}},React.createElement("div",{className:"control "+(singleLine?"input":"textarea")},React.createElement("div",{className:"highlighter",ref:"highlighter",style:this.getHighlighterStyle()},this.renderHighlighter()),this.renderInput(inputProps)),this.renderSuggestionsOverlay())},renderInput:function(props){props.value=this.getPlainText(),this.props.readOnly||this.props.disabled||(props.onChange=this.handleChange,props.onSelect=this.handleSelect,props.onKeyDown=this.handleKeyDown,props.onBlur=this.handleBlur);var style={display:"block",position:"absolute",top:0,boxSizing:"border-box",background:"transparent",font:"inherit"};return this.props.singleLine?(style.width="inherit",React.createElement("input",_extends({type:"text"},props,{ref:"input",style:style}))):(style.width="100%",style.height="100%",style.bottom=0,style.overflow="hidden",style.resize="none","undefined"!=typeof navigator&&/iPhone|iPad|iPod/i.test(navigator.userAgent)&&(style.marginTop=1,style.marginLeft=-3),React.createElement("textarea",_extends({},props,{ref:"input",style:style})))},getHighlighterStyle:function(){var style={position:"relative",width:"inherit",color:"transparent",font:"inherit",overflow:"hidden"};return this.props.singleLine?style.whiteSpace="pre":(style.whiteSpace="pre-wrap",style.wordWrap="break-word"),style},renderSuggestionsOverlay:function(){return utils.isNumber(this.state.selectionStart)?React.createElement(SuggestionsOverlay,{ref:"suggestions",suggestions:this.state.suggestions,onSelect:this.addMention,onMouseDown:this.handleSuggestionsMouseDown,isLoading:this.isLoading()}):null},renderHighlighter:function(){var caretPositionInMarkup,value=LinkedValueUtils.getValue(this.props)||"";this.state.selectionStart===this.state.selectionEnd&&(caretPositionInMarkup=utils.mapPlainTextIndex(value,this.props.markup,this.state.selectionStart,!1,this.props.displayTransform));var resultComponents=[],componentKeys={},components=resultComponents,substringComponentKey=0,textIteratee=function(substr,index){if(utils.isNumber(caretPositionInMarkup)&&caretPositionInMarkup>=index&&caretPositionInMarkup<=index+substr.length){var splitIndex=caretPositionInMarkup-index;components.push(this.renderSubstring(substr.substring(0,splitIndex),substringComponentKey)),components=[this.renderSubstring(substr.substring(splitIndex),substringComponentKey)]}else components.push(this.renderSubstring(substr,substringComponentKey));substringComponentKey++}.bind(this),mentionIteratee=function(markup,index,indexInPlainText,id,display,type){var key=_generateComponentKey(componentKeys,id);components.push(this.getMentionComponentForMatch(id,display,type,key))}.bind(this);return utils.iterateMentionsMarkup(value,this.props.markup,textIteratee,mentionIteratee,this.props.displayTransform),components.push(" "),components!==resultComponents&&resultComponents.push(this.renderHighlighterCaret(components)),resultComponents},renderSubstring:function(string,key){return React.createElement("span",{style:{visibility:"hidden"},key:key},string)},renderHighlighterCaret:function(children){return React.createElement("span",{className:"caret-marker",ref:"caret",key:"caret"},children)},getMentionComponentForMatch:function(id,display,type,key){var childrenCount=React.Children.count(this.props.children),props={id:id,display:display,key:key};if(childrenCount>1){if(!type)throw new Error("Since multiple Mention components have been passed as children, the markup has to define the __type__ placeholder");var foundChild=null;return React.Children.forEach(this.props.children,function(child){child&&child.props.type===type&&(foundChild=child)}),React.cloneElement(foundChild,props)}if(1===childrenCount){var child=this.props.children.length?this.props.children[0]:React.Children.only(this.props.children);return React.cloneElement(child,props)}return Mention(props)},getPlainText:function(){var value=LinkedValueUtils.getValue(this.props)||"";return utils.getPlainText(value,this.props.markup,this.props.displayTransform)},executeOnChange:function(event){for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_len>_key;_key++)args[_key-1]=arguments[_key];if(this.props.onChange){var _props2;return(_props2=this.props).onChange.apply(_props2,[event].concat(args))}if(this.props.valueLink){var _props$valueLink;return(_props$valueLink=this.props.valueLink).requestChange.apply(_props$valueLink,[event.target.value].concat(args))}},handleChange:function(ev){if(document.activeElement===ev.target){var value=LinkedValueUtils.getValue(this.props)||"",newPlainTextValue=ev.target.value,newValue=utils.applyChangeToValue(value,this.props.markup,newPlainTextValue,this.state.selectionStart,this.state.selectionEnd,ev.target.selectionEnd,this.props.displayTransform);newPlainTextValue=utils.getPlainText(newValue,this.props.markup,this.props.displayTransform);var selectionStart=ev.target.selectionStart,selectionEnd=ev.target.selectionEnd,setSelectionAfterMentionChange=!1,startOfMention=utils.findStartOfMentionInPlainText(value,this.props.markup,selectionStart,this.props.displayTransform);void 0!==startOfMention&&this.state.selectionEnd>startOfMention&&(selectionStart=startOfMention,selectionEnd=selectionStart,setSelectionAfterMentionChange=!0),this.setState({selectionStart:selectionStart,selectionEnd:selectionEnd,setSelectionAfterMentionChange:setSelectionAfterMentionChange});var mentions=utils.getMentions(newValue,this.props.markup),eventMock={target:{value:newValue}};this.executeOnChange(eventMock,newValue,newPlainTextValue,mentions)}},handleSelect:function(ev){this.setState({selectionStart:ev.target.selectionStart,selectionEnd:ev.target.selectionEnd});var el=this.refs.input;ev.target.selectionStart===ev.target.selectionEnd?this.updateMentionsQueries(el.value,ev.target.selectionStart):this.clearSuggestions(),this.updateHighlighterScroll(),this.props.onSelect(ev)},handleKeyDown:function(ev){var keyHandlers={},suggestionsCount=0;for(var prop in this.state.suggestions)this.state.suggestions.hasOwnProperty(prop)&&(suggestionsCount+=this.state.suggestions[prop].results.length);var suggestionsComp=this.refs.suggestions;suggestionsCount>0&&suggestionsComp&&(keyHandlers[KEY.ESC]=this.clearSuggestions,keyHandlers[KEY.DOWN]=suggestionsComp.shiftFocus.bind(null,1),keyHandlers[KEY.UP]=suggestionsComp.shiftFocus.bind(null,-1),keyHandlers[KEY.RETURN]=suggestionsComp.selectFocused,keyHandlers[KEY.TAB]=suggestionsComp.selectFocused),keyHandlers[ev.keyCode]?(keyHandlers[ev.keyCode](),ev.preventDefault()):this.props.onKeyDown(ev)},handleBlur:function(ev){this._suggestionsMouseDown||this.setState({selectionStart:null,selectionEnd:null}),this._suggestionsMouseDown=!1;var that=this;window.setTimeout(function(){that.updateHighlighterScroll()},1),this.props.onBlur(ev)},handleSuggestionsMouseDown:function(){this._suggestionsMouseDown=!0},updateSuggestionsPosition:function(){if(this.refs.caret&&this.refs.suggestions){var containerEl=this.refs.container,caretEl=this.refs.caret,suggestionsEl=React.findDOMNode(this.refs.suggestions),highligherEl=this.refs.highlighter;if(suggestionsEl){var leftPos=caretEl.offsetLeft-highligherEl.scrollLeft;leftPos+suggestionsEl.offsetWidth>containerEl.offsetWidth?suggestionsEl.style.right="0px":suggestionsEl.style.left=leftPos+"px",suggestionsEl.style.top=caretEl.offsetTop-highligherEl.scrollTop+"px"}}},updateHighlighterScroll:function(){if(this.refs.input&&this.refs.highlighter){var input=this.refs.input,highlighter=this.refs.highlighter;highlighter.scrollLeft=input.scrollLeft}},componentDidMount:function(){this.updateSuggestionsPosition()},componentDidUpdate:function(){this.updateSuggestionsPosition(),this.state.setSelectionAfterMentionChange&&(this.setState({setSelectionAfterMentionChange:!1}),this.setSelection(this.state.selectionStart,this.state.selectionEnd))},setSelection:function(selectionStart,selectionEnd){if(null!==selectionStart&&null!==selectionEnd){var el=this.refs.input;if(el.setSelectionRange)el.setSelectionRange(selectionStart,selectionEnd);else if(el.createTextRange){var range=el.createTextRange();range.collapse(!0),range.moveEnd("character",selectionEnd),range.moveStart("character",selectionStart),range.select()}}},updateMentionsQueries:function(plainTextValue,caretPosition){this._queryId++,this.setState({suggestions:{}});var value=LinkedValueUtils.getValue(this.props)||"";if(!utils.isInsideOfMention(value,this.props.markup,caretPosition,this.props.displayTransform)&&!utils.isInsideOfMention(value,this.props.markup,caretPosition-1,this.props.displayTransform)){var substring=plainTextValue.substring(0,caretPosition),that=this;React.Children.forEach(this.props.children,function(child){if(child){var regex=_getTriggerRegex(child.props.trigger),match=substring.match(regex);if(match){var querySequenceStart=substring.indexOf(match[1],match.index);that.queryData(match[2],child,querySequenceStart,querySequenceStart+match[1].length,plainTextValue)}}})}},clearSuggestions:function(){this._queryId++,this.setState({suggestions:{}})},queryData:function(query,mentionDescriptor,querySequenceStart,querySequenceEnd,plainTextValue){var provideData=_getDataProvider(mentionDescriptor.props.data),snycResult=provideData(query,this.updateSuggestions.bind(null,this._queryId,mentionDescriptor,query,querySequenceStart,querySequenceEnd,plainTextValue));snycResult instanceof Array&&this.updateSuggestions(this._queryId,mentionDescriptor,query,querySequenceStart,querySequenceEnd,plainTextValue,snycResult)},updateSuggestions:function(queryId,mentionDescriptor,query,querySequenceStart,querySequenceEnd,plainTextValue,suggestions){if(queryId===this._queryId){var update={};update[mentionDescriptor.type]={query:query,mentionDescriptor:mentionDescriptor,querySequenceStart:querySequenceStart,querySequenceEnd:querySequenceEnd,results:suggestions,plainTextValue:plainTextValue},this.setState({suggestions:utils.extend({},this.state.suggestions,update)})}},addMention:function(suggestion,mentionDescriptor,querySequenceStart,querySequenceEnd,plainTextValue){var value=LinkedValueUtils.getValue(this.props)||"",start=utils.mapPlainTextIndex(value,this.props.markup,querySequenceStart,!1,this.props.displayTransform),end=start+querySequenceEnd-querySequenceStart,insert=utils.makeMentionsMarkup(this.props.markup,suggestion.id,suggestion.display,mentionDescriptor.props.type),newValue=utils.spliceString(value,start,end,insert);this.refs.input.focus();var displayValue=this.props.displayTransform(suggestion.id,suggestion.display,mentionDescriptor.props.type),newCaretPosition=querySequenceStart+displayValue.length;this.setState({selectionStart:newCaretPosition,selectionEnd:newCaretPosition,setSelectionAfterMentionChange:!0});var eventMock={target:{value:newValue}},mentions=utils.getMentions(newValue,this.props.markup),newPlainTextValue=utils.spliceString(plainTextValue,querySequenceStart,querySequenceEnd,displayValue);this.executeOnChange(eventMock,newValue,newPlainTextValue,mentions);var onAdd=mentionDescriptor.props.onAdd;onAdd&&onAdd(suggestion.id,suggestion.display),this.clearSuggestions()},isLoading:function isLoading(){var isLoading=!1;return React.Children.forEach(this.props.children,function(child){isLoading=isLoading||child&&child.props.isLoading}),isLoading},_queryId:0})},{"./Mention":1,"./SuggestionsOverlay":3,"./utils":5,"fbjs/lib/emptyFunction":6,"react/lib/LinkedValueUtils":7}],3:[function(_dereq_,module){"use strict";function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}{var React="undefined"!=typeof window?window.React:"undefined"!=typeof global?global.React:null,emptyFunction=_dereq_("fbjs/lib/emptyFunction");_dereq_("./utils")}module.exports=React.createClass({displayName:"SuggestionsOverlay",getDefaultProps:function(){return{suggestions:{},onSelect:emptyFunction}},getInitialState:function(){return{focusIndex:0}},componentWillReceiveProps:function(){this.setState({focusIndex:0})},render:function(){return 0!==this.countSuggestions()||this.props.isLoading?React.createElement("div",{className:"suggestions",onMouseDown:this.props.onMouseDown},React.createElement("ul",null,this.renderSuggestions()),this.renderLoadingIndicator()):null},getSuggestions:function(){var suggestions=[];for(var mentionType in this.props.suggestions){if(!this.props.suggestions.hasOwnProperty(mentionType))return;suggestions=suggestions.concat({suggestions:this.props.suggestions[mentionType].results,descriptor:this.props.suggestions[mentionType]})}return suggestions},getSuggestion:function(index){return this.getSuggestions().reduce(function(result,_ref){var suggestions=_ref.suggestions,descriptor=_ref.descriptor,partial=suggestions.map(function(suggestion){return{suggestion:suggestion,descriptor:descriptor}});return[].concat(_toConsumableArray(result),_toConsumableArray(partial))},[])[index]},renderSuggestions:function(){var _this=this,transformSuggestions=function(result,_ref2){var suggestions=_ref2.suggestions,descriptor=_ref2.descriptor,partial=(descriptor.query,descriptor.querySequenceStart,descriptor.querySequenceEnd,descriptor.mentionDescriptor,descriptor.plainTextValue,suggestions.map(function(suggestion,index){return _this.renderSuggestion(suggestion,descriptor,result.length+index)}));return[].concat(_toConsumableArray(result),_toConsumableArray(partial))};return this.getSuggestions().reduce(transformSuggestions,[])},renderSuggestion:function(suggestion,descriptor,index){var id=this.getID(suggestion),isFocused=index===this.state.focusIndex,cls=isFocused?"focus":"",handleClick=this.select.bind(null,suggestion,descriptor);return React.createElement("li",{key:id,ref:isFocused&&"focused",className:cls,onClick:handleClick,onMouseEnter:this.handleMouseEnter.bind(null,index)},this.renderContent(id,suggestion,descriptor))},renderContent:function(id,suggestion,_ref3){var mentionDescriptor=_ref3.mentionDescriptor,query=_ref3.query,display=this.getDisplay(suggestion),highlightedDisplay=this.renderHighlightedDisplay(display,query);return mentionDescriptor.props.renderSuggestion?mentionDescriptor.props.renderSuggestion(id,display,query,highlightedDisplay):highlightedDisplay},getDisplay:function(suggestion){return suggestion instanceof String?suggestion:suggestion.id&&suggestion.display?suggestion.display:suggestion.id},getID:function(suggestion){return suggestion instanceof String?suggestion:suggestion.id},renderHighlightedDisplay:function(display,query){var i=display.toLowerCase().indexOf(query.toLowerCase());return-1===i?React.createElement("span",null,display):React.createElement("span",null,display.substring(0,i),React.createElement("b",null,display.substring(i,i+query.length)),display.substring(i+query.length))},renderLoadingIndicator:function(){return this.props.isLoading?React.createElement("div",{className:"loading-indicator"},React.createElement("div",{className:"spinner"},React.createElement("div",{className:"element1"}),React.createElement("div",{className:"element2"}),React.createElement("div",{className:"element3"}),React.createElement("div",{className:"element4"}),React.createElement("div",{className:"element5"}))):void 0},handleMouseEnter:function(index){this.setState({focusIndex:index})},select:function(suggestion,_ref4){var mentionDescriptor=_ref4.mentionDescriptor,querySequenceStart=_ref4.querySequenceStart,querySequenceEnd=_ref4.querySequenceEnd,plainTextValue=_ref4.plainTextValue;this.props.onSelect(suggestion,mentionDescriptor,querySequenceStart,querySequenceEnd,plainTextValue)},selectFocused:function(){var _getSuggestion=this.getSuggestion(this.state.focusIndex),suggestion=_getSuggestion.suggestion,descriptor=_getSuggestion.descriptor;this.select(suggestion,descriptor)},shiftFocus:function(delta){var suggestionsCount=this.countSuggestions();this.setState({focusIndex:(suggestionsCount+this.state.focusIndex+delta)%suggestionsCount})},countSuggestions:function(props){props=props||this.props;var result=0;for(var prop in this.props.suggestions)this.props.suggestions.hasOwnProperty(prop)&&(result+=this.props.suggestions[prop].results.length);return result}})},{"./utils":5,"fbjs/lib/emptyFunction":6}],4:[function(_dereq_,module){"use strict";module.exports={MentionsInput:_dereq_("./MentionsInput"),Mention:_dereq_("./Mention")}},{"./Mention":1,"./MentionsInput":2}],5:[function(_dereq_,module){"use strict";var PLACEHOLDERS={id:"__id__",display:"__display__",type:"__type__"},escapeMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},createEscaper=function(map){var escaper=function(match){return map[match]},keys=[];for(var key in map)map.hasOwnProperty(key)&&keys.push(key);var source="(?:"+keys.join("|")+")",testRegexp=RegExp(source),replaceRegexp=RegExp(source,"g");return function(string){return string=null==string?"":""+string,testRegexp.test(string)?string.replace(replaceRegexp,escaper):string}},numericComparator=function(a,b){return a=null===a?Number.MAX_VALUE:a,b=null===b?Number.MAX_VALUE:b,a-b};module.exports={escapeHtml:createEscaper(escapeMap),escapeRegex:function(str){return str.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},markupToRegex:function(markup,matchAtEnd){var markupPattern=this.escapeRegex(markup);return markupPattern=markupPattern.replace(PLACEHOLDERS.display,"(.+?)"),markupPattern=markupPattern.replace(PLACEHOLDERS.id,"(.+?)"),markupPattern=markupPattern.replace(PLACEHOLDERS.type,"(.+?)"),matchAtEnd&&(markupPattern+="$"),new RegExp(markupPattern,"g")},spliceString:function(str,start,end,insert){return str.substring(0,start)+insert+str.substring(end)},extend:function(obj){for(var source,prop,i=1,length=arguments.length;length>i;i++){source=arguments[i];for(prop in source)hasOwnProperty.call(source,prop)&&(obj[prop]=source[prop])}return obj},isNumber:function(obj){return"[object Number]"===Object.prototype.toString.call(obj)},getPositionOfCapturingGroup:function(markup,parameterName){if("id"!==parameterName&&"display"!==parameterName&&"type"!==parameterName)throw new Error("parameterName must be 'id', 'display', or 'type'");var indexDisplay=markup.indexOf(PLACEHOLDERS.display),indexId=markup.indexOf(PLACEHOLDERS.id),indexType=markup.indexOf(PLACEHOLDERS.type);if(0>indexDisplay&&(indexDisplay=null),0>indexId&&(indexId=null),0>indexType&&(indexType=null),null===indexDisplay&&null===indexId)throw new Error("The markup `"+markup+"` must contain at least one of the placeholders `__id__` or `__display__`");if(null===indexType&&"type"===parameterName)return null;var sortedIndices=[indexDisplay,indexId,indexType].sort(numericComparator);return null===indexDisplay&&(indexDisplay=indexId),null===indexId&&(indexId=indexDisplay),"id"===parameterName?sortedIndices.indexOf(indexId):"display"===parameterName?sortedIndices.indexOf(indexDisplay):"type"===parameterName?null===indexType?null:sortedIndices.indexOf(indexType):void 0},iterateMentionsMarkup:function(value,markup,textIteratee,markupIteratee,displayTransform){for(var match,regex=this.markupToRegex(markup),displayPos=this.getPositionOfCapturingGroup(markup,"display"),idPos=this.getPositionOfCapturingGroup(markup,"id"),typePos=this.getPositionOfCapturingGroup(markup,"type"),start=0,currentPlainTextIndex=0;null!==(match=regex.exec(value));){var id=match[idPos+1],display=match[displayPos+1],type=typePos?match[typePos+1]:null;displayTransform&&(display=displayTransform(id,display,type));var substr=value.substring(start,match.index);textIteratee(substr,start,currentPlainTextIndex),currentPlainTextIndex+=substr.length,markupIteratee(match[0],match.index,currentPlainTextIndex,id,display,type,start),currentPlainTextIndex+=display.length,start=regex.lastIndex}start<value.length&&textIteratee(value.substring(start),start,currentPlainTextIndex)},mapPlainTextIndex:function(value,markup,indexInPlainText,toEndOfMarkup,displayTransform){if(!this.isNumber(indexInPlainText))return indexInPlainText;var result,textIteratee=function(substr,index,substrPlainTextIndex){void 0===result&&substrPlainTextIndex+substr.length>=indexInPlainText&&(result=index+indexInPlainText-substrPlainTextIndex)},markupIteratee=function(markup,index,mentionPlainTextIndex,id,display){void 0===result&&mentionPlainTextIndex+display.length>indexInPlainText&&(result=index+(toEndOfMarkup?markup.length:0))};return this.iterateMentionsMarkup(value,markup,textIteratee,markupIteratee,displayTransform),void 0===result?value.length:result},findStartOfMentionInPlainText:function(value,markup,indexInPlainText,displayTransform){var result=indexInPlainText,foundMention=!1,markupIteratee=function(markup,index,mentionPlainTextIndex,id,display){indexInPlainText>mentionPlainTextIndex&&mentionPlainTextIndex+display.length>indexInPlainText&&(result=mentionPlainTextIndex,foundMention=!0)};return this.iterateMentionsMarkup(value,markup,function(){},markupIteratee,displayTransform),foundMention?result:void 0},isInsideOfMention:function(value,markup,indexInPlainText,displayTransform){var mentionStart=this.findStartOfMentionInPlainText(value,markup,indexInPlainText,displayTransform);return void 0!==mentionStart&&mentionStart!==indexInPlainText},applyChangeToValue:function(value,markup,plainTextValue,selectionStartBeforeChange,selectionEndBeforeChange,selectionEndAfterChange,displayTransform){var oldPlainTextValue=this.getPlainText(value,markup,displayTransform),lengthDelta=oldPlainTextValue.length-plainTextValue.length;"undefined"===selectionStartBeforeChange&&(selectionStartBeforeChange=selectionEndAfterChange+lengthDelta),"undefined"===selectionEndBeforeChange&&(selectionEndBeforeChange=selectionStartBeforeChange),selectionStartBeforeChange===selectionEndBeforeChange&&selectionEndBeforeChange===selectionEndAfterChange&&oldPlainTextValue.length===plainTextValue.length&&(selectionStartBeforeChange-=1);var insert=plainTextValue.slice(selectionStartBeforeChange,selectionEndAfterChange),spliceStart=Math.min(selectionStartBeforeChange,selectionEndAfterChange),spliceEnd=selectionEndBeforeChange;return selectionStartBeforeChange===selectionEndAfterChange&&(spliceEnd=Math.max(selectionEndBeforeChange,selectionStartBeforeChange+lengthDelta)),this.spliceString(value,this.mapPlainTextIndex(value,markup,spliceStart,!1,displayTransform),this.mapPlainTextIndex(value,markup,spliceEnd,!0,displayTransform),insert)},getPlainText:function(value,markup,displayTransform){var regex=this.markupToRegex(markup),idPos=this.getPositionOfCapturingGroup(markup,"id"),displayPos=this.getPositionOfCapturingGroup(markup,"display"),typePos=this.getPositionOfCapturingGroup(markup,"type");return value.replace(regex,function(){var id=arguments[idPos+1],display=arguments[displayPos+1],type=arguments[typePos+1];return displayTransform&&(display=displayTransform(id,display,type)),display})},getMentions:function(value,markup){var mentions=[];return this.iterateMentionsMarkup(value,markup,function(){},function(match,index,plainTextIndex,id,display,type){mentions.push({id:id,display:display,type:type,index:index,plainTextIndex:plainTextIndex})}),mentions},makeMentionsMarkup:function(markup,id,display,type){var result=markup.replace(PLACEHOLDERS.id,id);return result=result.replace(PLACEHOLDERS.display,display),result=result.replace(PLACEHOLDERS.type,type)}}},{}],6:[function(_dereq_,module){"use strict";function makeEmptyFunction(arg){return function(){return arg}}function emptyFunction(){}emptyFunction.thatReturns=makeEmptyFunction,emptyFunction.thatReturnsFalse=makeEmptyFunction(!1),emptyFunction.thatReturnsTrue=makeEmptyFunction(!0),emptyFunction.thatReturnsNull=makeEmptyFunction(null),emptyFunction.thatReturnsThis=function(){return this},emptyFunction.thatReturnsArgument=function(arg){return arg},module.exports=emptyFunction},{}],7:[function(_dereq_,module){"use strict";function _assertSingleLink(inputProps){null!=inputProps.checkedLink&&null!=inputProps.valueLink?invariant(!1):void 0}function _assertValueLink(inputProps){_assertSingleLink(inputProps),null!=inputProps.value||null!=inputProps.onChange?invariant(!1):void 0}function _assertCheckedLink(inputProps){_assertSingleLink(inputProps),null!=inputProps.checked||null!=inputProps.onChange?invariant(!1):void 0}function getDeclarationErrorAddendum(owner){if(owner){var name=owner.getName();if(name)return" Check the render method of `"+name+"`."}return""}var ReactPropTypes=_dereq_("./ReactPropTypes"),ReactPropTypeLocations=_dereq_("./ReactPropTypeLocations"),invariant=_dereq_("fbjs/lib/invariant"),hasReadOnlyValue=(_dereq_("fbjs/lib/warning"),{button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0}),propTypes={value:function(props,propName){return!props[propName]||hasReadOnlyValue[props.type]||props.onChange||props.readOnly||props.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(props,propName){return!props[propName]||props.onChange||props.readOnly||props.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:ReactPropTypes.func},loggedTypeFailures={},LinkedValueUtils={checkPropTypes:function(tagName,props,owner){for(var propName in propTypes){if(propTypes.hasOwnProperty(propName))var error=propTypes[propName](props,propName,tagName,ReactPropTypeLocations.prop);if(error instanceof Error&&!(error.message in loggedTypeFailures)){loggedTypeFailures[error.message]=!0;{getDeclarationErrorAddendum(owner)}}}},getValue:function(inputProps){return inputProps.valueLink?(_assertValueLink(inputProps),inputProps.valueLink.value):inputProps.value},getChecked:function(inputProps){return inputProps.checkedLink?(_assertCheckedLink(inputProps),inputProps.checkedLink.value):inputProps.checked},executeOnChange:function(inputProps,event){return inputProps.valueLink?(_assertValueLink(inputProps),inputProps.valueLink.requestChange(event.target.value)):inputProps.checkedLink?(_assertCheckedLink(inputProps),inputProps.checkedLink.requestChange(event.target.checked)):inputProps.onChange?inputProps.onChange.call(void 0,event):void 0}};module.exports=LinkedValueUtils},{"./ReactPropTypeLocations":12,"./ReactPropTypes":13,"fbjs/lib/invariant":17,"fbjs/lib/warning":19}],8:[function(_dereq_,module){"use strict";function assign(target){if(null==target)throw new TypeError("Object.assign target cannot be null or undefined");for(var to=Object(target),hasOwnProperty=Object.prototype.hasOwnProperty,nextIndex=1;nextIndex<arguments.length;nextIndex++){var nextSource=arguments[nextIndex];if(null!=nextSource){var from=Object(nextSource);for(var key in from)hasOwnProperty.call(from,key)&&(to[key]=from[key])}}return to}module.exports=assign},{}],9:[function(_dereq_,module){"use strict";var ReactCurrentOwner={current:null};module.exports=ReactCurrentOwner},{}],10:[function(_dereq_,module){"use strict";var ReactCurrentOwner=_dereq_("./ReactCurrentOwner"),assign=_dereq_("./Object.assign"),REACT_ELEMENT_TYPE=(_dereq_("./canDefineProperty"),"function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103),RESERVED_PROPS={key:!0,ref:!0,__self:!0,__source:!0},ReactElement=function(type,key,ref,self,source,owner,props){var element={$$typeof:REACT_ELEMENT_TYPE,type:type,key:key,ref:ref,props:props,_owner:owner};return element};ReactElement.createElement=function(type,config,children){var propName,props={},key=null,ref=null,self=null,source=null;if(null!=config){ref=void 0===config.ref?null:config.ref,key=void 0===config.key?null:""+config.key,self=void 0===config.__self?null:config.__self,source=void 0===config.__source?null:config.__source;for(propName in config)config.hasOwnProperty(propName)&&!RESERVED_PROPS.hasOwnProperty(propName)&&(props[propName]=config[propName])}var childrenLength=arguments.length-2;if(1===childrenLength)props.children=children;else if(childrenLength>1){for(var childArray=Array(childrenLength),i=0;childrenLength>i;i++)childArray[i]=arguments[i+2];
props.children=childArray}if(type&&type.defaultProps){var defaultProps=type.defaultProps;for(propName in defaultProps)"undefined"==typeof props[propName]&&(props[propName]=defaultProps[propName])}return ReactElement(type,key,ref,self,source,ReactCurrentOwner.current,props)},ReactElement.createFactory=function(type){var factory=ReactElement.createElement.bind(null,type);return factory.type=type,factory},ReactElement.cloneAndReplaceKey=function(oldElement,newKey){var newElement=ReactElement(oldElement.type,newKey,oldElement.ref,oldElement._self,oldElement._source,oldElement._owner,oldElement.props);return newElement},ReactElement.cloneAndReplaceProps=function(oldElement,newProps){var newElement=ReactElement(oldElement.type,oldElement.key,oldElement.ref,oldElement._self,oldElement._source,oldElement._owner,newProps);return newElement},ReactElement.cloneElement=function(element,config,children){var propName,props=assign({},element.props),key=element.key,ref=element.ref,self=element._self,source=element._source,owner=element._owner;if(null!=config){void 0!==config.ref&&(ref=config.ref,owner=ReactCurrentOwner.current),void 0!==config.key&&(key=""+config.key);for(propName in config)config.hasOwnProperty(propName)&&!RESERVED_PROPS.hasOwnProperty(propName)&&(props[propName]=config[propName])}var childrenLength=arguments.length-2;if(1===childrenLength)props.children=children;else if(childrenLength>1){for(var childArray=Array(childrenLength),i=0;childrenLength>i;i++)childArray[i]=arguments[i+2];props.children=childArray}return ReactElement(element.type,key,ref,self,source,owner,props)},ReactElement.isValidElement=function(object){return"object"==typeof object&&null!==object&&object.$$typeof===REACT_ELEMENT_TYPE},module.exports=ReactElement},{"./Object.assign":8,"./ReactCurrentOwner":9,"./canDefineProperty":14}],11:[function(_dereq_,module){"use strict";var ReactPropTypeLocationNames={};module.exports=ReactPropTypeLocationNames},{}],12:[function(_dereq_,module){"use strict";var keyMirror=_dereq_("fbjs/lib/keyMirror"),ReactPropTypeLocations=keyMirror({prop:null,context:null,childContext:null});module.exports=ReactPropTypeLocations},{"fbjs/lib/keyMirror":18}],13:[function(_dereq_,module){"use strict";function createChainableTypeChecker(validate){function checkType(isRequired,props,propName,componentName,location,propFullName){if(componentName=componentName||ANONYMOUS,propFullName=propFullName||propName,null==props[propName]){var locationName=ReactPropTypeLocationNames[location];return isRequired?new Error("Required "+locationName+" `"+propFullName+"` was not specified in "+("`"+componentName+"`.")):null}return validate(props,propName,componentName,location,propFullName)}var chainedCheckType=checkType.bind(null,!1);return chainedCheckType.isRequired=checkType.bind(null,!0),chainedCheckType}function createPrimitiveTypeChecker(expectedType){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName],propType=getPropType(propValue);if(propType!==expectedType){var locationName=ReactPropTypeLocationNames[location],preciseType=getPreciseType(propValue);return new Error("Invalid "+locationName+" `"+propFullName+"` of type "+("`"+preciseType+"` supplied to `"+componentName+"`, expected ")+("`"+expectedType+"`."))}return null}return createChainableTypeChecker(validate)}function createAnyTypeChecker(){return createChainableTypeChecker(emptyFunction.thatReturns(null))}function createArrayOfTypeChecker(typeChecker){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName];if(!Array.isArray(propValue)){var locationName=ReactPropTypeLocationNames[location],propType=getPropType(propValue);return new Error("Invalid "+locationName+" `"+propFullName+"` of type "+("`"+propType+"` supplied to `"+componentName+"`, expected an array."))}for(var i=0;i<propValue.length;i++){var error=typeChecker(propValue,i,componentName,location,propFullName+"["+i+"]");if(error instanceof Error)return error}return null}return createChainableTypeChecker(validate)}function createElementTypeChecker(){function validate(props,propName,componentName,location,propFullName){if(!ReactElement.isValidElement(props[propName])){var locationName=ReactPropTypeLocationNames[location];return new Error("Invalid "+locationName+" `"+propFullName+"` supplied to "+("`"+componentName+"`, expected a single ReactElement."))}return null}return createChainableTypeChecker(validate)}function createInstanceTypeChecker(expectedClass){function validate(props,propName,componentName,location,propFullName){if(!(props[propName]instanceof expectedClass)){var locationName=ReactPropTypeLocationNames[location],expectedClassName=expectedClass.name||ANONYMOUS,actualClassName=getClassName(props[propName]);return new Error("Invalid "+locationName+" `"+propFullName+"` of type "+("`"+actualClassName+"` supplied to `"+componentName+"`, expected ")+("instance of `"+expectedClassName+"`."))}return null}return createChainableTypeChecker(validate)}function createEnumTypeChecker(expectedValues){function validate(props,propName,componentName,location,propFullName){for(var propValue=props[propName],i=0;i<expectedValues.length;i++)if(propValue===expectedValues[i])return null;var locationName=ReactPropTypeLocationNames[location],valuesString=JSON.stringify(expectedValues);return new Error("Invalid "+locationName+" `"+propFullName+"` of value `"+propValue+"` "+("supplied to `"+componentName+"`, expected one of "+valuesString+"."))}return createChainableTypeChecker(Array.isArray(expectedValues)?validate:function(){return new Error("Invalid argument supplied to oneOf, expected an instance of array.")})}function createObjectOfTypeChecker(typeChecker){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName],propType=getPropType(propValue);if("object"!==propType){var locationName=ReactPropTypeLocationNames[location];return new Error("Invalid "+locationName+" `"+propFullName+"` of type "+("`"+propType+"` supplied to `"+componentName+"`, expected an object."))}for(var key in propValue)if(propValue.hasOwnProperty(key)){var error=typeChecker(propValue,key,componentName,location,propFullName+"."+key);if(error instanceof Error)return error}return null}return createChainableTypeChecker(validate)}function createUnionTypeChecker(arrayOfTypeCheckers){function validate(props,propName,componentName,location,propFullName){for(var i=0;i<arrayOfTypeCheckers.length;i++){var checker=arrayOfTypeCheckers[i];if(null==checker(props,propName,componentName,location,propFullName))return null}var locationName=ReactPropTypeLocationNames[location];return new Error("Invalid "+locationName+" `"+propFullName+"` supplied to "+("`"+componentName+"`."))}return createChainableTypeChecker(Array.isArray(arrayOfTypeCheckers)?validate:function(){return new Error("Invalid argument supplied to oneOfType, expected an instance of array.")})}function createNodeChecker(){function validate(props,propName,componentName,location,propFullName){if(!isNode(props[propName])){var locationName=ReactPropTypeLocationNames[location];return new Error("Invalid "+locationName+" `"+propFullName+"` supplied to "+("`"+componentName+"`, expected a ReactNode."))}return null}return createChainableTypeChecker(validate)}function createShapeTypeChecker(shapeTypes){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName],propType=getPropType(propValue);if("object"!==propType){var locationName=ReactPropTypeLocationNames[location];return new Error("Invalid "+locationName+" `"+propFullName+"` of type `"+propType+"` "+("supplied to `"+componentName+"`, expected `object`."))}for(var key in shapeTypes){var checker=shapeTypes[key];if(checker){var error=checker(propValue,key,componentName,location,propFullName+"."+key);if(error)return error}}return null}return createChainableTypeChecker(validate)}function isNode(propValue){switch(typeof propValue){case"number":case"string":case"undefined":return!0;case"boolean":return!propValue;case"object":if(Array.isArray(propValue))return propValue.every(isNode);if(null===propValue||ReactElement.isValidElement(propValue))return!0;var iteratorFn=getIteratorFn(propValue);if(!iteratorFn)return!1;var step,iterator=iteratorFn.call(propValue);if(iteratorFn!==propValue.entries){for(;!(step=iterator.next()).done;)if(!isNode(step.value))return!1}else for(;!(step=iterator.next()).done;){var entry=step.value;if(entry&&!isNode(entry[1]))return!1}return!0;default:return!1}}function getPropType(propValue){var propType=typeof propValue;return Array.isArray(propValue)?"array":propValue instanceof RegExp?"object":propType}function getPreciseType(propValue){var propType=getPropType(propValue);if("object"===propType){if(propValue instanceof Date)return"date";if(propValue instanceof RegExp)return"regexp"}return propType}function getClassName(propValue){return propValue.constructor&&propValue.constructor.name?propValue.constructor.name:"<<anonymous>>"}var ReactElement=_dereq_("./ReactElement"),ReactPropTypeLocationNames=_dereq_("./ReactPropTypeLocationNames"),emptyFunction=_dereq_("fbjs/lib/emptyFunction"),getIteratorFn=_dereq_("./getIteratorFn"),ANONYMOUS="<<anonymous>>",ReactPropTypes={array:createPrimitiveTypeChecker("array"),bool:createPrimitiveTypeChecker("boolean"),func:createPrimitiveTypeChecker("function"),number:createPrimitiveTypeChecker("number"),object:createPrimitiveTypeChecker("object"),string:createPrimitiveTypeChecker("string"),any:createAnyTypeChecker(),arrayOf:createArrayOfTypeChecker,element:createElementTypeChecker(),instanceOf:createInstanceTypeChecker,node:createNodeChecker(),objectOf:createObjectOfTypeChecker,oneOf:createEnumTypeChecker,oneOfType:createUnionTypeChecker,shape:createShapeTypeChecker};module.exports=ReactPropTypes},{"./ReactElement":10,"./ReactPropTypeLocationNames":11,"./getIteratorFn":15,"fbjs/lib/emptyFunction":16}],14:[function(_dereq_,module){"use strict";var canDefineProperty=!1;module.exports=canDefineProperty},{}],15:[function(_dereq_,module){"use strict";function getIteratorFn(maybeIterable){var iteratorFn=maybeIterable&&(ITERATOR_SYMBOL&&maybeIterable[ITERATOR_SYMBOL]||maybeIterable[FAUX_ITERATOR_SYMBOL]);return"function"==typeof iteratorFn?iteratorFn:void 0}var ITERATOR_SYMBOL="function"==typeof Symbol&&Symbol.iterator,FAUX_ITERATOR_SYMBOL="@@iterator";module.exports=getIteratorFn},{}],16:[function(_dereq_,module){module.exports=_dereq_(6)},{}],17:[function(_dereq_,module){"use strict";function invariant(condition,format,a,b,c,d,e,f){if(!condition){var error;if(void 0===format)error=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var args=[a,b,c,d,e,f],argIndex=0;error=new Error(format.replace(/%s/g,function(){return args[argIndex++]})),error.name="Invariant Violation"}throw error.framesToPop=1,error}}module.exports=invariant},{}],18:[function(_dereq_,module){"use strict";var invariant=_dereq_("./invariant"),keyMirror=function(obj){var key,ret={};obj instanceof Object&&!Array.isArray(obj)?void 0:invariant(!1);for(key in obj)obj.hasOwnProperty(key)&&(ret[key]=key);return ret};module.exports=keyMirror},{"./invariant":17}],19:[function(_dereq_,module){"use strict";var emptyFunction=_dereq_("./emptyFunction"),warning=emptyFunction;module.exports=warning},{"./emptyFunction":16}]},{},[4])(4)});